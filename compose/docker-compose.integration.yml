services:
  spotify:
    image: ghcr.io/petoadam/homenavi-spotify:${HN_VERSION:-latest}
    pull_policy: always
    restart: unless-stopped
    environment:
      - PORT=8099
      - JWT_PUBLIC_KEY_PATH=/app/keys/jwt_public.pem
      - INTEGRATION_SECRETS_PATH=/app/config/integration.secrets.json
    volumes:
      - ${INTEGRATIONS_ROOT:?set INTEGRATIONS_ROOT}/integrations/secrets/spotify.secrets.json:/app/config/integration.secrets.json
      - ${INTEGRATIONS_ROOT:?set INTEGRATIONS_ROOT}/keys/jwt_public.pem:/app/keys/jwt_public.pem:ro
    networks:
      - homenavi-network

networks:
  homenavi-network:
    external: true
    name: homenavi-network
